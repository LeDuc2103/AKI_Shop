<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>‚úÖ ƒê√É C·∫¨P NH·∫¨T PH√ÇN QUY·ªÄN M·ªöI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 80px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            margin: 30px auto;
        }
        
        .header {
            background: linear-gradient(135deg, #088178 0%, #066d63 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .content {
            padding: 40px;
        }
        
        .step-box {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #088178;
        }
        
        .btn-custom {
            padding: 15px 30px;
            margin: 10px;
            border-radius: 30px;
            font-size: 1.1em;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #088178;
            color: white;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-info {
            background: #17a2b8;
            color: white;
        }
        
        .btn-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .code-box {
            background: #2d3748;
            color: #68d391;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            font-family: monospace;
            margin: 15px 0;
        }
        
        .role-table {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
        }
        
        .role-table th {
            background: #088178;
            color: white;
            padding: 15px;
            text-align: left;
        }
        
        .role-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
        }
        
        .badge-custom {
            padding: 8px 15px;
            border-radius: 5px;
            font-weight: bold;
            color: white;
        }
        
        .badge-admin {
            background: #dc3545;
        }
        
        .badge-staff {
            background: #ffc107;
            color: #000;
        }
        
        .badge-customer {
            background: #6c757d;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-check-circle"></i> C·∫¨P NH·∫¨T PH√ÇN QUY·ªÄN TH√ÄNH C√îNG!</h1>
            <p style="font-size: 1.3em; margin: 10px 0 0 0;">H·ªá th·ªëng ph√¢n quy·ªÅn 3 c·∫•p</p>
        </div>

        <div class="content">
            <div class="alert alert-success" style="background: #d4edda; padding: 25px; border-radius: 10px; border-left: 5px solid #28a745;">
                <h4><i class="fas fa-check-double"></i> ƒê√£ c·∫≠p nh·∫≠t:</h4>
                <ul style="line-height: 2.5; font-size: 1.05em; margin: 10px 0 0 0;">
                    <li>‚úÖ <strong>login.php</strong> - ƒê√£ s·ª≠a ph√¢n quy·ªÅn m·ªõi</li>
                    <li>‚úÖ <strong>admin.php</strong> - ƒê√£ c·∫≠p nh·∫≠t ki·ªÉm tra vai_tro</li>
                    <li>‚úÖ <strong>Giao di·ªán login</strong> - ƒê√£ x√≥a m·ª•c "Ph√¢n quy·ªÅn ƒëƒÉng nh·∫≠p"</li>
                </ul>
            </div>

            <div class="step-box">
                <h3><i class="fas fa-list-alt"></i> Quy t·∫Øc ph√¢n quy·ªÅn M·ªöI:</h3>
                <table class="role-table">
                    <tr>
                        <th>Vai tr√≤ trong DB</th>
                        <th>Badge</th>
                        <th>Chuy·ªÉn ƒë·∫øn</th>
                        <th>M√¥ t·∫£</th>
                    </tr>
                    <tr style="background: #d4edda;">
                        <td><strong>quanly</strong></td>
                        <td><span class="badge-custom badge-admin">QU·∫¢N L√ù</span></td>
                        <td><strong>‚Üí admin.php</strong></td>
                        <td>Qu·∫£n tr·ªã vi√™n cao nh·∫•t</td>
                    </tr>
                    <tr style="background: #d4edda;">
                        <td><strong>nhanvien</strong></td>
                        <td><span class="badge-custom badge-staff">NH√ÇN VI√äN</span></td>
                        <td><strong>‚Üí admin.php</strong></td>
                        <td>Nh√¢n vi√™n c√≥ quy·ªÅn qu·∫£n tr·ªã</td>
                    </tr>
                    <tr style="background: #fff3cd;">
                        <td><strong>khachhang</strong></td>
                        <td><span class="badge-custom badge-customer">KH√ÅCH H√ÄNG</span></td>
                        <td>‚Üí index.php</td>
                        <td>Kh√°ch h√†ng th∆∞·ªùng</td>
                    </tr>
                </table>
            </div>

            <div class="step-box">
                <h3><i class="fas fa-database"></i> B∆Ø·ªöC 1: Ki·ªÉm tra ph√¢n quy·ªÅn trong database</h3>
                <p>Xem t√†i kho·∫£n n√†o c√≥ vai_tro l√† quanly, nhanvien, khachhang:</p>
                <div class="text-center">
                    <a href="check_phanquyen.php" class="btn-custom btn-info" target="_blank">
                        <i class="fas fa-search"></i> Ki·ªÉm Tra Ph√¢n Quy·ªÅn
                    </a>
                </div>
            </div>

            <div class="step-box">
                <h3><i class="fas fa-sign-in-alt"></i> B∆Ø·ªöC 2: ƒêƒÉng nh·∫≠p</h3>
                <p>Trang login ƒë√£ ƒë∆∞·ª£c l√†m s·∫°ch, kh√¥ng c√≤n hi·ªÉn th·ªã th√¥ng tin ph√¢n quy·ªÅn:</p>
                <div class="text-center">
                    <a href="login.php" class="btn-custom btn-primary">
                        <i class="fas fa-key"></i> ƒêƒÉng Nh·∫≠p Ngay
                    </a>
                </div>
            </div>

            <div class="step-box">
                <h3><i class="fas fa-code"></i> Code ƒë√£ thay ƒë·ªïi:</h3>

                <h5>üìù login.php - Logic ph√¢n quy·ªÅn:</h5>
                <div class="code-box">
                    // L·∫•y vai tr√≤ v√† chuy·ªÉn v·ªÅ ch·ªØ th∆∞·ªùng $vai_tro = strtolower(trim($user['vai_tro'])); // PH√ÇN QUY·ªÄN THEO Y√äU C·∫¶U M·ªöI: // 'quanly' v√† 'nhanvien' ‚Üí admin.php // 'khachhang' ‚Üí index.php if ($vai_tro === 'quanly' || $vai_tro === 'nhanvien') { // QU·∫¢N L√ù ho·∫∑c
                    NH√ÇN VI√äN ‚Üí admin.php $_SESSION['admin_logged_in'] = true; header('Location: admin.php'); exit(); } else { // KH√ÅCH H√ÄNG ‚Üí index.php header('Location: index.php'); exit(); }
                </div>

                <h5>üìù admin.php - Ki·ªÉm tra quy·ªÅn:</h5>
                <div class="code-box">
                    // Ki·ªÉm tra vai_tro = 'quanly' ho·∫∑c 'nhanvien' $stmt = $conn->prepare("SELECT * FROM user WHERE email = ? AND (LOWER(vai_tro) = 'quanly' OR LOWER(vai_tro) = 'nhanvien')");
                </div>

                <h5>üìù Giao di·ªán login - ƒê√£ x√≥a:</h5>
                <div class="code-box" style="background: #f8d7da; color: #721c24;">
                    <!-- ƒê√É X√ìA -->
                    &lt;div class="info-box"&gt; &lt;strong&gt;Ph√¢n quy·ªÅn ƒëƒÉng nh·∫≠p:&lt;/strong&gt; ... &lt;/div&gt;
                </div>
            </div>

            <div class="alert alert-info" style="background: #d1ecf1; padding: 25px; border-radius: 10px; border-left: 5px solid #17a2b8;">
                <h4><i class="fas fa-info-circle"></i> C√°ch ho·∫°t ƒë·ªông:</h4>
                <ol style="line-height: 2.5; font-size: 1.05em;">
                    <li>User ƒëƒÉng nh·∫≠p b·∫±ng email/password</li>
                    <li>H·ªá th·ªëng l·∫•y <code>vai_tro</code> t·ª´ b·∫£ng <strong>user</strong></li>
                    <li>Chuy·ªÉn v·ªÅ ch·ªØ th∆∞·ªùng: <code>strtolower(trim($vai_tro))</code></li>
                    <li>So s√°nh:
                        <ul style="margin-top: 10px;">
                            <li>N·∫øu = <strong>'quanly'</strong> ho·∫∑c <strong>'nhanvien'</strong> ‚Üí <strong>admin.php</strong></li>
                            <li>N·∫øu = <strong>'khachhang'</strong> ho·∫∑c kh√°c ‚Üí <strong>index.php</strong></li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="alert alert-warning" style="background: #fff3cd; padding: 25px; border-radius: 10px; border-left: 5px solid #ffc107;">
                <h4><i class="fas fa-exclamation-triangle"></i> L∆∞u √Ω:</h4>
                <ul style="line-height: 2;">
                    <li>Vai tr√≤ ph·∫£i ch√≠nh x√°c: <strong>quanly</strong>, <strong>nhanvien</strong>, <strong>khachhang</strong> (ch·ªØ th∆∞·ªùng, kh√¥ng d·∫•u)</li>
                    <li>T√†i kho·∫£n ph·∫£i c√≥ <code>trang_thai = 'active'</code></li>
                    <li>Password ƒë∆∞·ª£c m√£ h√≥a MD5</li>
                    <li>Giao di·ªán login ƒë√£ s·∫°ch s·∫Ω, kh√¥ng hi·ªÉn th·ªã th√¥ng tin ph√¢n quy·ªÅn</li>
                </ul>
            </div>

            <div class="alert alert-success" style="background: #d4edda; padding: 25px; border-radius: 10px; border-left: 5px solid #28a745;">
                <h4><i class="fas fa-check-circle"></i> K·∫øt qu·∫£ mong ƒë·ª£i:</h4>
                <table style="width: 100%; margin-top: 15px;">
                    <tr style="background: #f8f9fa;">
                        <th style="padding: 12px; border: 1px solid #ddd;">ƒêƒÉng nh·∫≠p v·ªõi vai_tro</th>
                        <th style="padding: 12px; border: 1px solid #ddd;">K·∫øt qu·∫£</th>
                    </tr>
                    <tr style="background: #d4edda;">
                        <td style="padding: 12px; border: 1px solid #ddd;"><strong>quanly</strong></td>
                        <td style="padding: 12px; border: 1px solid #ddd;"><strong>‚Üí admin.php ‚úÖ</strong></td>
                    </tr>
                    <tr style="background: #d4edda;">
                        <td style="padding: 12px; border: 1px solid #ddd;"><strong>nhanvien</strong></td>
                        <td style="padding: 12px; border: 1px solid #ddd;"><strong>‚Üí admin.php ‚úÖ</strong></td>
                    </tr>
                    <tr style="background: #fff3cd;">
                        <td style="padding: 12px; border: 1px solid #ddd;"><strong>khachhang</strong></td>
                        <td style="padding: 12px; border: 1px solid #ddd;">‚Üí index.php</td>
                    </tr>
                </table>
            </div>

            <div class="text-center" style="margin-top: 40px;">
                <a href="check_phanquyen.php" class="btn-custom btn-info" target="_blank">
                    <i class="fas fa-database"></i> 1. Ki·ªÉm Tra Database
                </a>
                <a href="login.php" class="btn-custom btn-primary">
                    <i class="fas fa-sign-in-alt"></i> 2. ƒêƒÉng Nh·∫≠p
                </a>
            </div>

            <div style="margin-top: 30px; padding: 25px; background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); border-radius: 15px; text-align: center; color: white;">
                <h3 style="margin-bottom: 15px;">
                    <i class="fas fa-rocket"></i> H·ªÜ TH·ªêNG ƒê√É S·∫¥N S√ÄNG!
                </h3>
                <p style="font-size: 1.15em; margin: 0;">
                    <strong>quanly</strong> v√† <strong>nhanvien</strong> ‚Üí admin.php<br>
                    <strong>khachhang</strong> ‚Üí index.php<br> Giao di·ªán login ƒë√£ g·ªçn g√†ng! üéâ
                </p>
            </div>
        </div>
    </div>
</body>

</html>